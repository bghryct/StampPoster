<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Make A Stamp Poster!</title>
  <link rel="shortcut icon" type="image/x-icon" href="https://bghryct.github.io/StampPoster/assets/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Spline+Sans+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
</head>
<body>
  
  <div class="form-container">
    <div class="form-row">
     <input type="color" id="color-picker" value="#000000">
    </div>
    
  <div class="form-row">
    <label for="font-select">Font:</label>
    <select id="font-select">
      <option value="Arial">Arial</option>
      <option value="Helvetica">Helvetica</option>
      <option value="Helvetica-Bold">Helvetica Bold</option>
      <option value="HelveticaItalic">Helvetica Italic</option>
      <option value="HelveticaBoldItalic">Helvetica Bold Italic</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Times New Roman Bold">Times New Roman Bold</option>
      <option value="Times New Roman-Italic">Times New Roman Italic</option>
      <option value="Verdana">Verdana</option>
       <option value="Spline Sans Mono">Spline Sans Mono</option>
      <!-- Add more font options here -->
    </select>
  </div>
  <div class="form-row">
    <label for="character-select">Character:</label>
    <select id="character-select">
      <option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
<option value="E">E</option>
<option value="F">F</option>
<option value="G">G</option>
<option value="H">H</option>
<option value="I">I</option>
<option value="J">J</option>
<option value="K">K</option>
<option value="L">L</option>
<option value="M">M</option>
<option value="N">N</option>
<option value="O">O</option>
<option value="P">P</option>
<option value="Q">Q</option>
<option value="R">R</option>
<option value="S">S</option>
<option value="T">T</option>
<option value="U">U</option>
<option value="V">V</option>
<option value="W">W</option>
<option value="X">X</option>
<option value="Y">Y</option>
<option value="Z">Z</option>
<option value="a">a</option>
<option value="b">b</option>
<option value="c">c</option>
<option value="d">d</option>
<option value="e">e</option>
<option value="f">f</option>
<option value="g">g</option>
<option value="h">h</option>
<option value="i">i</option>
<option value="j">j</option>
<option value="k">k</option>
<option value="l">l</option>
<option value="m">m</option>
<option value="n">n</option>
<option value="o">o</option>
<option value="p">p</option>
<option value="q">q</option>
<option value="r">r</option>
<option value="s">s</option>
<option value="t">t</option>
<option value="u">u</option>
<option value="v">v</option>
<option value="w">w</option>
<option value="x">x</option>
<option value="y">y</option>
<option value="z">z</option>
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="!">!</option>
<option value=""">"</option>
<option value="#">#</option>
<option value="$">$</option>
<option value="%">%</option>
<option value="&">&</option>
<option value="'">'</option>
<option value="(">(</option>
<option value=")">)</option>
<option value="*">*</option>
<option value="+">+</option>
<option value=",">,</option>
<option value="-">-</option>
<option value=".">.</option>
<option value="/">/</option>
<option value=":">:</option>
<option value=";">>;</option>
<option value="<"><</option>
<option value="=">=</option>
<option value="?">?</option>
<option value="@">@</option>
<option value="[">[</option>
<option value="\"> </option>
<option value="]">]</option>
<option value="^">^</option>
<option value="_">_</option>
<option value="`">`</option>
<option value="{">{</option>
<option value="|">|</option>
<option value="}">}</option>
<option value="~">~</option>
<option value="¡">¡</option>
<option value="¢">¢</option>
<option value="£">£</option>
<option value="¤">¤</option>
<option value="¥">¥</option>
<option value="¦">¦</option>
<option value="§">§</option>
<option value="¨">¨</option>
<option value="©">©</option>
<option value="ª">ª</option>
<option value="«">«</option>
<option value="¬">¬</option>
<option value="®">®</option>
<option value="¯">¯</option>
<option value="°">°</option>
<option value="±">±</option>
<option value="²">²</option>
<option value="³">³</option>
<option value="´">´</option>
<option value="µ">µ</option>
<option value="¶">¶</option>
<option value="·">·</option>
<option value="¸">¸</option>
<option value="¹">¹</option>
<option value="º">º</option>
      <!-- Add more options for other characters -->
    </select>
  </div>
  <div class="form-row">
    <label for="size-select">Size:</label>
    <select id="size-select">
      <option value="9">9 pt</option>
      <option value="12">12 pt</option>
      <option value="24">24 pt</option>
      <option value="36">36 pt</option>
      <option value="60">60 pt</option>
      <option value="72">72 pt</option>
      <option value="96">96 pt</option>
      <option value="120">120 pt</option>
      <option value="144">144 pt</option>
    </select>
  </div>
</div>
    <div class="canvas-container">
  <canvas id="canvas" width="792" height="1224"></canvas>
  </div>
   <div class="button-container">
  <button id="save-button">Save as PDF</button>
  </div>
  
<script>
  //delete this if it doesn't work
  // Get the canvas element and its context
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// Set up some variables to track the state of the rectangle being drawn
let isDragging = false;
let startX, startY, endX, endY;

// Set up the color picker element
const colorPicker = document.createElement('input');
colorPicker.type = 'color';
colorPicker.value = '#000000'; // Set the initial color to black

// Add an event listener to the color picker to update the strokeStyle of the context
colorPicker.addEventListener('input', (e) => {
  ctx.strokeStyle = e.target.value;
});

// Add the color picker to the page
document.body.appendChild(colorPicker);

// Add event listeners to the canvas to handle rectangle drawing
canvas.addEventListener('mousedown', (e) => {
  // Start drawing the rectangle
  isDragging = true;
  startX = e.clientX - canvas.offsetLeft;
  startY = e.clientY - canvas.offsetTop;
});

canvas.addEventListener('mousemove', (e) => {
  if (isDragging) {
    // Update the position of the rectangle being drawn
    endX = e.clientX - canvas.offsetLeft;
    endY = e.clientY - canvas.offsetTop;

    // Clear the canvas and redraw the rectangle
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeRect(startX, startY, endX - startX, endY - startY);
  }
});

canvas.addEventListener('mouseup', (e) => {
  // Stop drawing the rectangle
  isDragging = false;

  // Save the rectangle as an image on the canvas
  ctx.drawImage(canvas, startX, startY, endX - startX, endY - startY, startX, startY, endX - startX, endY - startY);
});
  //delete this if it doesn't work
  </script>
  
  <script>
    //not sure if this helps
    window.jsPDF = window.jspdf.jsPDF;

    const canvas = document.getElementById("canvas");
    const context = canvas.getContext("2d");
    let currentFont = "Arial";
    let currentCharacter = "A";
    let currentSize = "12";
    
    function drawCharacter(x, y) {
      context.font = currentSize + "pt " + currentFont;
      context.fillText(currentCharacter, x, y);
    }
    
    canvas.addEventListener("click", function(event) {
      const rect = canvas.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      drawCharacter(x, y);
    });
    
    const fontSelect = document.getElementById("font-select");
    fontSelect.addEventListener("change", function(event) {
      currentFont = event.target.value;
    });
    
    const characterSelect = document.getElementById("character-select");
    characterSelect.addEventListener("change", function(event) {
      currentCharacter = event.target.value;
    });

    const sizeSelect = document.getElementById("size-select");
    sizeSelect.addEventListener("change", function(event) {
      currentSize = event.target.value;
    });
    
 // Download button
document.getElementById("save-button").addEventListener('click', function () {
  let pdf = null;
  let width = canvas.width; 
  let height = canvas.height;

  //set the orientation
  if(width > height){
    pdf = new jsPDF('l', 'px', [width, height]);
  }
  else{
    pdf = new jsPDF('p', 'px', [height, width]);
  }
  //then we get the dimensions from the 'pdf' file itself
  width = pdf.internal.pageSize.getWidth();
  height = pdf.internal.pageSize.getHeight();
  pdf.addImage(canvas.toDataURL(), 'PNG', 0, 0, width, height);
  pdf.save("download.pdf");
});
  </script>
</body>
</html>
